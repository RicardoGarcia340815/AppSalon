{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","eventListeners","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","url","resultado","fetch","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","servicioObj","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","headingCita","innerHTML","serviciosCita","headingServicios","cantidad","contenedorServicio","textoServicio","totalServicio","split","trim","cantidadPagar","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","inputFecha","fechaAhora","year","getFullYear","mes","getMonth","getDate","fechaDeshabilitar","min","inputHora"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1; // Si yo lo cambio a dos, me mostraria como pagina principal \"Información del cliente\"\n\nconst cita = {\n    nombre:\"\",\n    fecha:\"\",\n    hora:\"\",\n    servicios:[]\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n\n\n    eventListeners();\n\n});\n\nfunction eventListeners(){\n\n     // Consulta los Servicios\n     mostrarServicios();\n\n     // Resalta el Div Actual segun el tab al que se presiona\n     mostrarSeccion();\n\n//Oculta o muestra una seccion segun el tab al que se presiona\ncambiarSeccion();\n\n//Paginación siguiente y anterior\npaginaSiguiente();\n\npaginaAnterior();\n\n//Comprueba la página actual para mostrar u ocultar la paginación\nbotonesPaginador();\n\n//Muestra el resumen de la cita o mensaje de error en caso de no pasar la validación\nmostrarResumen();\n\n//Almacena el nombre de la  cita en el objeto.\nnombreCita();\n\n//Almacenar la fecha de la cita en el objeto \nfechaCita();\n\n//Deshanilitar días pasados\ndeshabilitarFechaAnterior();\n\n//Almacena la hora de la cita en el objeto\nhoraCita();\n}\n\nfunction mostrarSeccion(){\n\n //Eliminar mostrar seccion de la seccion anterior\n\n    const seccionAnterior = document.querySelector(\".mostrar-seccion\");\n    if(seccionAnterior){\n     seccionAnterior.classList.remove(\"mostrar-seccion\");\n    }\n\n    const seccionActual = document.querySelector(`#paso-${pagina}`);\n    seccionActual.classList.add(\"mostrar-seccion\");\n\n    //Eliminar la clase de actual en el tab anterior\n    const tabAnterior = document.querySelector(\".tabs .actual\");\n    if(tabAnterior){\n        tabAnterior.classList.remove(\"actual\");\n    }\n\n    //Resalta el tab seleccionado\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\n    tab.classList.add(\"actual\");\n}\n\nfunction cambiarSeccion(){\n    const enlaces = document.querySelectorAll(\".tabs button\");\n\n    enlaces.forEach( enlace => {\n         enlace.addEventListener(\"click\", e => {\n           e.preventDefault();\n           pagina = parseInt(e.target.dataset.paso); //Lo convertimos a entero\n\n          \n          //Llamar la funcion de mostrar seccion\n          mostrarSeccion();\n\n          botonesPaginador();\n        });\n    });\n}\n\nasync function mostrarServicios(){\n    try {\n        \n        const url = \"http://localhost:3000/servicios.php\";\n\n        const resultado = await fetch(url);\n        const db = await resultado.json();\n       \n       //Const {servicios} = db;\n\n     //Generar el html\n     db.forEach(servicio => { //db es la conexión a la base de datos\n        const {id, nombre, precio } = servicio;\n\n        //DOM Scripting\n        //Generar Nombre del servicio\n        const nombreServicio = document.createElement(\"P\");\n        nombreServicio.textContent = nombre;\n        nombreServicio.classList.add(\"nombre-servicio\");\n \n\n        //Generar el precio derl servicio\n        const precioServicio = document.createElement(\"P\");\n        precioServicio.textContent = `$ ${precio}`;\n        precioServicio.classList.add(\"precio-servicio\");\n       \n        //Generar el div contenedor de servicio\n        const servicioDiv = document.createElement(\"DIV\");\n        servicioDiv.classList.add(\"servicio\");\n        servicioDiv.dataset.idServicio = id;\n\n        // Selecciona un servicio para la cita\n        servicioDiv.onclick = seleccionarServicio;\n\n\n        //Inyectar precio y nombre al div de servicio\n        servicioDiv.appendChild(nombreServicio);\n        servicioDiv.appendChild(precioServicio);\n\n        //Inyectaremos en el html\n        document.querySelector(\"#servicios\").appendChild(servicioDiv);\n\n     });\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nfunction seleccionarServicio(e){\n   let elemento; //Inicializamos sin valor\n    //Forzar que el elemento al que demos click sea el div\n    if(e.target.tagName == \"P\"){\n        elemento = e.target.parentElement;\n    } else{\n     elemento = e.target;\n    }\n    if(elemento.classList.contains(\"seleccionado\")){ //Si doy click lo agrega\n        elemento.classList.remove(\"seleccionado\"); //Si ya esta seleccionado lo quita\n         \n\n     const id = parseInt(elemento.dataset.idServicio);\n\n     eliminarServicio(id);\n     }else{\n            elemento.classList.add(\"seleccionado\");\n\n            const servicioObj = {\n            id: parseInt(elemento.dataset.idServicio),\n            nombre: elemento.firstElementChild.textContent,\n            precio: elemento.firstElementChild.nextElementSibling.textContent\n        }\n\n        agregarServicio(servicioObj);\n    }\n    \n}\n\nfunction eliminarServicio(id) {\n   const { servicios } = cita;\n   cita.servicios = servicios.filter( servicio => servicio.id !== id);\n\n   console.log(cita);\n }\n\nfunction agregarServicio(servicioObj){\n   const {  servicios } = cita;\n   cita.servicios = [...servicios, servicioObj];\n  //Agrega un arreglo y toma una copia de los servicios y le agregamos el nuevo\n  // a cita. servicios\n  console.log(cita);\n}\n\nfunction paginaSiguiente(){\nconst paginaSiguiente = document.querySelector(\"#siguiente\");\npaginaSiguiente.addEventListener(\"click\", () => {\npagina++;\n\nbotonesPaginador();\n});\n}\n\nfunction paginaAnterior(){\n  const paginaAnterior = document.querySelector(\"#anterior\");\n  paginaAnterior.addEventListener(\"click\", () => {\npagina--;\n\nbotonesPaginador();\n  });\n}\n\nfunction botonesPaginador() {\n    const paginaSiguiente = document.querySelector(\"#siguiente\");\n    const paginaAnterior = document.querySelector(\"#anterior\");\n\n    if(pagina  === 1) {\n        paginaAnterior.classList.add(\"ocultar\");\n    } else if (pagina === 3) {\n        paginaSiguiente.classList.add(\"ocultar\");\n        paginaAnterior.classList.remove(\"ocultar\");\n\n        mostrarResumen(); // Estamos en la página 3, carga el resumen de la cita\n    } else {\n        paginaAnterior.classList.remove(\"ocultar\");\n        paginaSiguiente.classList.remove(\"ocultar\");\n    }\n\n    mostrarSeccion(); // Cambia la sección que se muestra por la de la página\n}\n\nfunction mostrarResumen() {\n    // Destructuring\n    const { nombre, fecha, hora, servicios } = cita;\n\n    // Seleccionar el resumen\n    const resumenDiv = document.querySelector(\".contenido-resumen\");\n\n    // Limpia el HTML previo\n    while( resumenDiv.firstChild ) {\n        resumenDiv.removeChild( resumenDiv.firstChild );\n    }\n\n\n    // validación de objeto\n    if(Object.values(cita).includes(\"\")) {\n        const noServicios = document.createElement(\"P\");\n        noServicios.textContent = \"Faltan datos de Servicios, hora, fecha o Nombre\";\n\n        noServicios.classList.add(\"invalidar-cita\");\n\n        // agregar a resumen Div\n        resumenDiv.appendChild(noServicios);\n\n        return;\n    } \n\n    const headingCita = document.createElement(\"H3\");\n    headingCita.textContent = \"Resumen de Cita\";\n\n    //Mostrar el resumen\n    const nombreCita = document.createElement(\"P\");\n    nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\n\n    const fechaCita = document.createElement(\"P\");\n    fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`;\n\n    const horaCita = document.createElement(\"P\");\n    horaCita.innerHTML = `<span>Hora:</span> ${hora}`;\n\n    const serviciosCita = document.createElement(\"DIV\");\n    serviciosCita.classList.add(\"resumen-servicios\");\n\n    const headingServicios = document.createElement(\"H3\");\n    headingServicios.textContent = \"Resumen de Servicios\";\n    serviciosCita.appendChild(headingServicios);\n\n    let cantidad = 0;\n\n\n  //Iterar sobre el arreglo de servicios\n    servicios.forEach( servicio => {\n        const { nombre, precio } = servicio;\n        const contenedorServicio = document.createElement(\"DIV\");\n        contenedorServicio.classList.add(\"contenedor-servicio\")\n\n        const textoServicio = document.createElement(\"P\");\n        textoServicio.textContent = nombre;\n\n        const precioServicio = document.createElement(\"P\");\n        precioServicio.textContent = precio;\n        precioServicio.classList.add(\"precio\");\n\n        const totalServicio = precio.split(\"$\");\n       cantidad+= parseInt(totalServicio[1].trim());\n\n     //Colocar texto y precio en el div\n     contenedorServicio.appendChild(textoServicio);\n     contenedorServicio.appendChild(precioServicio);\n\n     serviciosCita.appendChild(contenedorServicio);\n\n    } );\n\n\n    resumenDiv.appendChild(headingCita);\n    resumenDiv.appendChild(nombreCita);\n    resumenDiv.appendChild(fechaCita);\n    resumenDiv.appendChild(horaCita);\n    \n    resumenDiv.appendChild(serviciosCita);\n\n    const cantidadPagar = document.createElement(\"P\");\n    cantidadPagar.classList.add(\"total\");\n    cantidadPagar.innerHTML = `<span>Total a Pagar:  </span> $ ${cantidad}`;\n    resumenDiv.appendChild(cantidadPagar);\n}\n\nfunction nombreCita(){\n\n    const nombreInput = document.querySelector(\"#nombre\");\n   \n      nombreInput.addEventListener(\"input\", e => {\n          const nombreTexto = e.target.value.trim();\n          //Con trim() no tomara los espacios al inicio o al final\n       \n          //Vailidacion de que nombreTexto debe tener algo\n          if(nombreTexto == \"\" || nombreTexto.length < 3){\n            mostrarAlerta(\"Nombre no valido\", \"error\");\n          }else {\n              const alerta = document.querySelector(\".alerta\");\n              if(alerta){//Esto eliminara en tiempo real la alerta\n                  alerta.remove();\n              }\n              cita.nombre = nombreTexto;\n            }\n    });\n}\n\nfunction mostrarAlerta(mensaje, tipo){\n\n//Si hay una alerta previa, entonces que no se repita\nconst alertaPrevia = document.querySelector(\".alerta\");\nif(alertaPrevia){\n    return ;\n    //O se pueede hacer el alertaPrevia.remove();\n}\n\nconst alerta = document.createElement(\"DIV\");\nalerta.textContent = mensaje;\nalerta.classList.add(\"alerta\");\n\nif(tipo == \"error\"){\nalerta.classList.add(\"error\");\n\n}\n//Insertar en el html\nconst formulario = document.querySelector(\".formulario\");\nformulario.appendChild(alerta);\n\n//Eliminar la alerta despues de 3 segundos\nsetTimeout(() => {\n    alerta.remove();\n}, 3000);\n}\n\nfunction fechaCita (){\n    const fechaInput = document.querySelector(\"#fecha\");\n    fechaInput.addEventListener(\"input\", e =>{\n      \n        const dia = new Date(e.target.value).getUTCDay();//Convierte los dias en numeros\n\n        if([0].includes(dia)){ //El día 0 es el domingo, ese dia no hay servicio\n         e.preventDefault();\n         fechaInput.value = \"\";\n            mostrarAlerta(\"Los domingo no hay servicio\", \"error\");\n        }else{\n            cita.fecha = fechaInput.value;// Con eso agregaremos todo a la cita\n\n            console.log(cita);\n        }\n    });\n}\n\nfunction deshabilitarFechaAnterior() {\n    const inputFecha = document.querySelector(\"#fecha\");\n\n    const fechaAhora = new Date();\n    const year = fechaAhora.getFullYear();\n    const mes = fechaAhora.getMonth() + 1; //JS empieza los meses desde 0\n    const dia = fechaAhora.getDate();\n    const fechaDeshabilitar = `${year}-${mes < 10 ? `0${mes}` : mes}-${dia < 10 ? `0${dia}` : dia}`;\n    \n    inputFecha.min = fechaDeshabilitar;\n}\n\nfunction horaCita(){\n   const inputHora = document.querySelector(\"#hora\");\n   inputHora.addEventListener(\"input\", e =>{\n\n    const horaCita = e.target.value;\n    const hora = horaCita.split(\":\");//Evaluara el string de la hora y buscara alguna letra o espacio dividira la cadena de texto\n    if(hora[0]< 9 || hora[0] > 20){\nmostrarAlerta(\"No tenemos servicio\", \"error\");\nsetTimeout(() =>{\n    inputHora. value = \"\";\n},3000);\n }else {\n        cita.hora = horaCita;\n    }\n});\n}"]}